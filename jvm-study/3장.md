## 3장 정리

### 기억 집합 관리
- 세대 간 참조를 추적하는 방법이다.
  - 작동 방식 
    - 올드 영역에서 뉴 영역으로의 참조를 기록합니다. 
    - 뉴 영역 GC 시 전체 힙을 스캔하지 않고도 관련 참조를 빠르게 찾을 수 있게 합니다.

    ### 쓰기 장벽
    - 기억 집합 관리 구현 방식 중 하나인 개념
      - 세대 간 참조를 추적하기 위해, 객체에 쓰기가 발생할 때 마다 뉴 영역에서 올드 영역으로의 참조를 기록한다. 이 과정은 바이트 코드를 조작하여 기록하는 코드를 삽입한다.
    ### 읽기 장벽
  - 기억 집합 관리 구현 방식 중 하나인 개념
      - 세대 간 참조를 추적하기 위해, 객체에 읽가 발생할 때 마다 뉴 영역에서 올드 영역으로의 참조를 기록한다. 이 과정은 바이트 코드를 조작하여 기록하는 코드를 삽입한다.

### 포워딩 포인터
- GC가 객체를 이주할 때 사용하는 포인터이다.
  - 이 포인터는 객체가 이주한 위치를 가리킨다.
  - 이 포인터를 사용하면, GC가 이주한 객체를 참조하는 다른 객체들을 쉽게 찾을 수 있다.

### 컬러 포인터
- 세대간 구분이 없는 ZGC에서 사용하는 방법으로 쓰인다.
  - 객체의 상태를 나타내는 비트를 포인터에 추가하여, GC가 객체의 상태를 빠르게 판단할 수 있게 한다.
  - 세대간 구별이 없이 그냥 객체들의 상태를 빠르게 체크하기 위해 사용된다.


### GC 정리
- 셰넌 도어
  - 사용자 스레드와 GC 스레드가 동시에 실행되는 방식이다.
  - 세대 단위 컬렉션을 사용하지 않는다. (신세대 리전과 구세대 리전을 구별하지 않는다.)
    - 그러니 기억 집합 관리와 같은 세대 간 참조를 기록할 필요가 없고, 포워딩 포인터를 사용하여 객체 이주만을 기록한다.
  - 기억 집합 대신, 연결 행렬로 리전 간 참조 관계를 기록한다.
  - GC가 동작할 때, 동시 이주라는 단계가 있다. 다른 컬렉터들과 구분해주는 핵심적인 차이이다.
    - 이 단계에서는 회수 집합 안에 살아 있는 객체들을 다른 빈 리전으로 복사하는데
    - 사용자 스레드와 동시에 실행되기 때문에, 이 문제를 고려하기 위해 읽기 장벽과 포워딩 포인터를 이용하여
    - 사용자 스레드가 회수 대상 객체를 읽고 쓰더라도 문제가 없도록 구현해놨다.

- G1GC
  - 셰넌 도어와 비슷하게 동작하지만, 세대 단위 컬렉션을 사용한다.
  - 셰넌 도어와 달리, 리전을 사용하여 세대를 구분한다.
  - 세대간 참조와 리전들의 점진적 회수를 처리하기 위해 기억 집합을 활용하고, 기억 집합 관리에는 쓰기 장벽을 활용했다.

- ZGC
  - 기억 집합을 전혀 사용하지 않고, 세대 구분이 없다.
  - ZGC의 최우선 목표는 일시 정지 시간(STW) 단축이다.
  - 세대 구분 ZGC는 JDK 21에 정식으로 추가되었다.
  - 세대 구분 ZGC는 컬러 포인터와 읽기 장벽을 사용하고 있지만, 세대 간 참조를 효율적으로 추적하기 위해 쓰기 장벽도 활용한다.


